<!DOCTYPE html>
<html>
<head>
	<title>拖拽</title>
	<!-- 面向过程改成面向对象 -->
	<style type="text/css">
	*{

	}
	
	</style>
	<script type="text/javascript">
		// var obox = null;
		// var disx=0;
		// var disy=0;
window.onload = function(){
	new fla({width:100,height:100,background:'blue'});
	
}

fla.prototype.init = function(){
	this.obox =document.createElement('div');
		this.obox.style.width=this.width+'px';		 
		this.obox.style.height=this.height+'px';
	    this.obox.style.background=this.background;
	   
	    this.obox.style.position='absolute';
	    document.body.appendChild(this.obox);
	  	//初始化  
}
//this.obox

	function fla(option){
		 //属性罗列
			this.disx=0;
			this.disy=0;
			this.width=option.width;
			this.height=option.height;
			this.background=option.background;
		
			this.init();
			
			 //事件绑定
	this.bindEvent();
	
	}


/*
	fla.prototype.bindEvent=function(){	

		this.obox.onmousedown= function(ev){
			var oevent = ev||event;
		this.disx = oevent.clientX - this.obox.offsetLeft;
		this.disy = oevent.clientY - this.obox.offsetTop;

		document.onmousemove = this.move.bind(this);
		document.onmouseup = this.up;
		}.bind(this)
	}*
		//法三：匿名函数bind，也是函数，有返回值。这样写。里面的this就是fla对象，不再是box
	

	/*
	fla.prototype.bindEvent=function(){	
	var _self= this;
	this.obox.onmousedown= function(ev){
			var oevent = ev||event;
				_self.disx = oevent.clientX - _self.obox.offsetLeft;
				_self.disy = oevent.clientY - _self.obox.offsetTop;
				document.onmousemove = _self.move.bind(_self);
				document.onmouseup = _self.up;
		}
	}
	*/
	//法二：用this存放fla对象，函数里面用_self指代this（对象）

	/*
	fla.prototype.bindEvent=function(){
	this.obox.onmousedown = this.fndown.bind(this);	
	}
	fla.prototype.fndown= function(ev){
		console.log(this);
			var oevent = ev||event;
			this.disx = oevent.clientX - this.obox.offsetLeft;
			this.disy = oevent.clientY - this.obox.offsetTop;

			document.onmousemove = this.move.bind(this);
			document.onmouseup = this.up;
	}
	*/
	// 法一调用函数同时bind

	fla.prototype.move =function(ev){
		
			var oevent =ev||event;
				// var l=oevent.clientX-disx;
				// var t=oevent.clientY-disy;
				// console.log(l+"##"+t);
				this.obox.style.left=oevent.clientX-this.disx+'px';
				this.obox.style.top=oevent.clientY-this.disy+'px';

	}
	fla.prototype.up =function(ev){
		console.log(this);
		document.onmousemove= null;
				document.onmouseup=null;
	}
	</script>
</head>
<body>
	<!-- <div id="box"></div> -->

</body>
</html>