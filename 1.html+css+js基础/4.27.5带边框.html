<!DOCTYPE html>
<html>
<head>
	<title>拖拽</title>
	<style type="text/css">
	*{
		margin: 0;
		padding: 0;
	}
		
		#box{
			width: 50px;
			height: 50px;
			background-color: red;
			position: absolute;
		}
		.box{
			border:1px dashed  #000;
			/*虚线框*/
			position: absolute;
			box-sizing: border-box;
		}
	</style>
	<script type="text/javascript">
		window.onload =function(){
			var obox =document.getElementById('box');
			var disx=0;
			var disy=0;
			obox.onmousedown =function(ev){
				//alert(1);
				var oevent =ev||event;
				disx=oevent.clientX-obox.offsetLeft;
				disy=oevent.clientY-obox.offsetTop;
				console.log(disx+"##"+disy);
				var obox3=document.createElement('div');
				obox3.className='box';
				obox3.style.width=obox.offsetWidth+'px';
				obox3.style.height=obox.offsetHeight+'px';

				obox3.style.left=obox.offsetLeft+'px';
				obox3.style.top=obox.offsetTop+'px';
				document.body.appendChild(obox3);

				document.onmousemove =function(ev){
				//alert(1);
				var oevent =ev||event;
				
				obox3.style.left=oevent.clientX-disx+'px';
				obox3.style.top=oevent.clientY-disy+'px';
				var l= oevent.clientX-disx;
				var t= oevent.clientY-disy;
					if (l<0) {
						l=0;
					}else if(l>window.innerWidth-obox.offsetWidth){
						l=indow.innerWidth-obox.offsetWidth;
					}
					if (t<0) {
						t=0;
					}else if(l>window.innerTop-obox.offsetTop){
						l=window.innerTop-obox.offsetTop;
					}

			}

			document.onmouseup =function(){
				//alert(1);
				document.onmousemove=null;
				document.onmouseup=null;

				obox.style.left=obox3.offsetLeft+'px';
				obox.style.top=obox3.offsetTop+'px';
				document.body.removeChild(obox3);
			}
			
		}
	

			
	}
	</script>
</head>
<body>

		<div id="box"></div>	


</body>
</html>