<!DOCTYPE html>
<html>
<head>
	<title>单例模式</title>
	<script type="text/javascript">
		// function Person(name){
			// this.name =  name ;
		// }
		// var s1= new Person('ttt');
		// var s2= new Person('ttt');

		//这样new，会new出来多个，需求是不管怎么new，只构建一个

		//()();
		//前面包函数，后面是执行的。


		(function(w){
			var king =null;
			function King (){
				var sef = this;
				var fn =(function(){
				return function(){
					if (!king) {
						
					sef.name = 'name';
					sef.id= Math.random();
					king =sef;
						
					}
					return  king;
				//返回一个对象
				}
				})();
				return fn();
				
				

				
				}

				
			King.prototype = {
				constrctor:King,
				__proto__:Object.prototype,
			say:function(){
				console.log(this.name+this.id+'say');
			}

			}
			King.getking = (function(){
				var king =null;
				return function(){
					if (!king) {
						king= new King();
					}
					return king;
				}

			})();
			w.King = King;
		})(window);

		King.getking();
		for (var i = 1; i < 5; i++) {
			new King().say();
			}

	</script>
</head>
<body>

</body>
</html>